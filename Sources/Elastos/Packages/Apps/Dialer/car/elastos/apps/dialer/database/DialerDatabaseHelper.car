
module
{
    using interface Elastos.Droid.Content.IContext;
    using interface Elastos.Droid.Database.Sqlite.ISQLiteDatabase;
    using interface Elastos.Utility.IArrayList;
    interface Elastos.App.Dailer.Dialpad.ISmartDialNameMatcher;

    namespace Elastos{
    namespace Apps {
    namespace Dailer {
    namespace Database {

    /**
      * @Invovle
      * interface ISQLiteOpenHelper
      */
    interface IDialerDatabaseHelper {
        /**
         * SmartDial DB version ranges:
         * <pre>
         *   0-98   KitKat
         * </pre>
         */
        const Int32 DATABASE_VERSION = 4;
        const String DATABASE_NAME = "dialer.db";

        DropTables(
            [in] ISQLiteDatabase* db);

        /**
         * Stores a key-value pair in the {@link Tables#PROPERTIES} table.
         */
        SetProperty(
            [in] String key,
            [in] String value);

        SetProperty(
            [in] ISQLiteDatabase* db,
            [in] String key,
            [in] String value);

        /**
         * Returns the value from the {@link Tables#PROPERTIES} table.
         */
        GetProperty(
            [in] String key,
            [in] String defaultValue,
            [out] String* value);

        GetProperty(
            [in] ISQLiteDatabase* db,
            [in] String key,
            [in] String defaultValue,
            [out] String* value);

        GetPropertyAsInt(
            [in] ISQLiteDatabase* db,
            [in] String key,
            [in] String defaultValue,
            [out] Int32* value);

        /**
         * Starts the database upgrade process in the background.
         */
        StartSmartDialUpdateThread();

        /**
         * Updates the smart dial and prefix database.
         * This method queries the Delta API to get changed contacts since last update, and updates the
         * records in smartdial database and prefix database accordingly.
         * It also queries the deleted contact database to remove newly deleted contacts since last
         * update.
         */
        UpdateSmartDialDatabase();

        /**
         * Returns a list of candidate contacts where the query is a prefix of the dialpad index of
         * the contact's name or phone number.
         *
         * @param query The prefix of a contact's dialpad index.
         * @return A list of top candidate contacts that will be suggested to user to match their input.
         */
        GetLooseMatches(
            [in] String query,
            [in] ISmartDialNameMatcher* nameMatcher,
            [out] IArrayList** list);
    }

    interface IDialerDatabaseHelperContactNumber
    {
    }

    interface IDialerDatabaseHelperContactMatch
    {
    }

    interface IDialerDatabaseHelperDeleteContactQuery {
        /** Selects only rows that have been deleted after a certain time stamp.*/
        const String SELECT_UPDATED_CLAUSE = /*ContactsContract.DeletedContacts.CONTACT_DELETED_TIMESTAMP*/
                 "contact_deleted_timestamp > ?";
    }

    [local]
    interface IDialerDatabaseHelperHelper {
        /**
         * Access function to get the singleton instance of DialerDatabaseHelper.
         */
        GetInstance(
            [in] IContext* ctx,
            [out] IDialerDatabaseHelper** helper);
    }

    } //Database
    } //Dailer
    } //Apps
    } //Elastos
}
